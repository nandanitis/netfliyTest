{"ast":null,"code":"import _regeneratorRuntime from\"C:/Coding/Web_Dev/MERN_STACK/imdbMovie/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Coding/Web_Dev/MERN_STACK/imdbMovie/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Coding/Web_Dev/MERN_STACK/imdbMovie/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import\"./movieForm.css\";import{useMoviesContext}from'../hooks/useMoviesContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MovieForm=function MovieForm(props){var _useMoviesContext=useMoviesContext(),dispatch=_useMoviesContext.dispatch;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),jsonn=_useState2[0],setJsonn=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var obj,response,json,wrong;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();obj=JSON.parse(jsonn);if(!(password===\"1237\")){_context.next=13;break;}_context.next=5;return fetch(\"/api/movies\",{method:\"POST\",body:JSON.stringify(obj),headers:{\"Content-Type\":\"application/json\"}});case 5:response=_context.sent;_context.next=8;return response.json();case 8:json=_context.sent;if(!response.ok){setError(json.error);}if(response.ok){setError(null);console.log(\" New Movie added: \",json);dispatch({type:'CREATE_MOVIE',payload:json});props.onClose();}_context.next=16;break;case 13:wrong=document.getElementById('passwordWrong');wrong.innerHTML=\"Password is Wrong\";wrong.style.color=\"red\";case 16:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{className:\"create\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Movie Title:\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"enterJson\",onChange:function onChange(e){return setJsonn(e.target.value);},value:jsonn}),/*#__PURE__*/_jsx(\"label\",{children:\"Password :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setPassword(e.target.value);},value:password}),/*#__PURE__*/_jsx(\"div\",{id:\"passwordWrong\"}),/*#__PURE__*/_jsx(\"button\",{className:\"buttonToAdd\",children:\"Add Movie\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})]});};export default MovieForm;","map":{"version":3,"names":["useState","useMoviesContext","MovieForm","props","dispatch","jsonn","setJsonn","password","setPassword","error","setError","handleSubmit","e","preventDefault","obj","JSON","parse","fetch","method","body","stringify","headers","response","json","ok","console","log","type","payload","onClose","wrong","document","getElementById","innerHTML","style","color","target","value"],"sources":["C:/Coding/Web_Dev/MERN_STACK/imdbMovie/frontend/src/components/movieform.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport \"./movieForm.css\";\r\n\r\nimport {useMoviesContext} from  '../hooks/useMoviesContext'\r\n\r\nconst MovieForm = (props) => {\r\n  const{dispatch} = useMoviesContext()\r\n  const [jsonn,setJsonn] = useState(\"\");\r\n  const [password,setPassword] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n\r\n\r\n\r\n  const handleSubmit = async (e) => {\r\n    \r\n    e.preventDefault();\r\n    let obj = JSON.parse(jsonn);\r\n    if(password===\"1237\"){\r\n      const response = await fetch(\"/api/movies\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify(obj),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n      const json = await response.json();\r\n  \r\n      if (!response.ok) {\r\n        setError(json.error);\r\n      }\r\n      if (response.ok) {\r\n        setError(null);\r\n        console.log(\" New Movie added: \", json);\r\n        dispatch({type: 'CREATE_MOVIE', payload: json})\r\n        props.onClose();\r\n      }\r\n    }else{\r\n       let  wrong = document.getElementById('passwordWrong');\r\n       wrong.innerHTML=\"Password is Wrong\"\r\n       wrong.style.color = \"red\";\r\n\r\n    }\r\n\r\n    \r\n  };\r\n\r\n  return (\r\n    <form className=\"create\" onSubmit={handleSubmit}>\r\n      <label>Movie Title:</label>\r\n      <textarea\r\n        className=\"enterJson\"        \r\n        onChange={(e) => setJsonn(e.target.value)}\r\n        value={jsonn}\r\n      />\r\n\r\n      <label>Password :</label>\r\n      <input \r\n        type=\"text\" \r\n        onChange={(e) => setPassword(e.target.value)} \r\n        value={password}\r\n        \r\n      />\r\n      <div id=\"passwordWrong\"></div>\r\n\r\n      <button className=\"buttonToAdd\" >Add Movie</button>\r\n      {error && <div className=\"error\">{error}</div>}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default MovieForm;\r\n"],"mappings":"+ZAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,MAAO,iBAAP,CAEA,OAAQC,gBAAR,KAAgC,2BAAhC,C,wFAEA,GAAMC,UAAS,CAAG,QAAZA,UAAY,CAACC,KAAD,CAAW,CAC3B,sBAAkBF,gBAAgB,EAAlC,CAAMG,QAAN,mBAAMA,QAAN,CACA,cAAyBJ,QAAQ,CAAC,EAAD,CAAjC,wCAAOK,KAAP,eAAaC,QAAb,eACA,eAA+BN,QAAQ,CAAC,EAAD,CAAvC,yCAAOO,QAAP,eAAgBC,WAAhB,eACA,eAA0BR,QAAQ,CAAC,IAAD,CAAlC,yCAAOS,KAAP,eAAcC,QAAd,eAIA,GAAMC,aAAY,4FAAG,iBAAOC,CAAP,gJAEnBA,CAAC,CAACC,cAAF,GACIC,GAHe,CAGTC,IAAI,CAACC,KAAL,CAAWX,KAAX,CAHS,MAIhBE,QAAQ,GAAG,MAJK,iDAKMU,MAAK,CAAC,aAAD,CAAgB,CAC1CC,MAAM,CAAE,MADkC,CAE1CC,IAAI,CAAEJ,IAAI,CAACK,SAAL,CAAeN,GAAf,CAFoC,CAG1CO,OAAO,CAAE,CACP,eAAgB,kBADT,CAHiC,CAAhB,CALX,QAKXC,QALW,qCAYEA,SAAQ,CAACC,IAAT,EAZF,QAYXA,IAZW,eAcjB,GAAI,CAACD,QAAQ,CAACE,EAAd,CAAkB,CAChBd,QAAQ,CAACa,IAAI,CAACd,KAAN,CAAR,CACD,CACD,GAAIa,QAAQ,CAACE,EAAb,CAAiB,CACfd,QAAQ,CAAC,IAAD,CAAR,CACAe,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAkCH,IAAlC,EACAnB,QAAQ,CAAC,CAACuB,IAAI,CAAE,cAAP,CAAuBC,OAAO,CAAEL,IAAhC,CAAD,CAAR,CACApB,KAAK,CAAC0B,OAAN,GACD,CAtBgB,+BAwBXC,KAxBW,CAwBHC,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAxBG,CAyBhBF,KAAK,CAACG,SAAN,CAAgB,mBAAhB,CACAH,KAAK,CAACI,KAAN,CAAYC,KAAZ,CAAoB,KAApB,CA1BgB,uDAAH,kBAAZxB,aAAY,4CAAlB,CAiCA,mBACE,cAAM,SAAS,CAAC,QAAhB,CAAyB,QAAQ,CAAEA,YAAnC,wBACE,uCADF,cAEE,iBACE,SAAS,CAAC,WADZ,CAEE,QAAQ,CAAE,kBAACC,CAAD,QAAON,SAAQ,CAACM,CAAC,CAACwB,MAAF,CAASC,KAAV,CAAf,EAFZ,CAGE,KAAK,CAAEhC,KAHT,EAFF,cAQE,qCARF,cASE,cACE,IAAI,CAAC,MADP,CAEE,QAAQ,CAAE,kBAACO,CAAD,QAAOJ,YAAW,CAACI,CAAC,CAACwB,MAAF,CAASC,KAAV,CAAlB,EAFZ,CAGE,KAAK,CAAE9B,QAHT,EATF,cAeE,YAAK,EAAE,CAAC,eAAR,EAfF,cAiBE,eAAQ,SAAS,CAAC,aAAlB,uBAjBF,CAkBGE,KAAK,eAAI,YAAK,SAAS,CAAC,OAAf,UAAwBA,KAAxB,EAlBZ,GADF,CAsBD,CA/DD,CAiEA,cAAeP,UAAf"},"metadata":{},"sourceType":"module"}