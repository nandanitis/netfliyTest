{"ast":null,"code":"import _regeneratorRuntime from\"C:/Coding/Web_Dev/MERN_STACK/imdbMovie/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Coding/Web_Dev/MERN_STACK/imdbMovie/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Coding/Web_Dev/MERN_STACK/imdbMovie/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useEffect,useState}from\"react\";import{useMoviesContext}from\"../hooks/useMoviesContext\";import{Link}from\"react-router-dom\";import MovieForm from\"../components/movieform\";import Modal from\"../Modal/Modal\";import\"./movies.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Movies=function Movies(){var _useMoviesContext=useMoviesContext(),movies=_useMoviesContext.movies,dispatch=_useMoviesContext.dispatch;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];useEffect(function(){var fetchMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/movies\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;if(response.ok){dispatch({type:\"SET_MOVIES\",payload:json});}case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchMovies(){return _ref.apply(this,arguments);};}();fetchMovies();},[]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_id){var response,json;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('/api/movies/'+_id,{method:'DELETE'});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:json=_context2.sent;if(response.ok){dispatch({type:\"DELETE_MOVIE\",payload:json});}case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{id:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"margin-Top\",children:/*#__PURE__*/_jsx(\"div\",{id:\"section\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"content\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"addMovie\",onClick:function onClick(){return setShow(true);},children:\"Add Movie\"}),/*#__PURE__*/_jsx(Modal,{title:\"Add A New Movie\",onClose:function onClose(){return setShow(false);},show:show,children:/*#__PURE__*/_jsx(MovieForm,{onClose:function onClose(){return setShow(false);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"post\",children:movies&&movies.map(function(movie){return/*#__PURE__*/_jsx(\"div\",{className:\"postCards\",children:/*#__PURE__*/_jsx(\"a\",{href:\"article.html\",children:/*#__PURE__*/_jsxs(Link,{to:\"/api/movies/\".concat(movie._id),movie:movie,children:[/*#__PURE__*/_jsx(\"img\",{src:movie.posterUrl}),/*#__PURE__*/_jsx(\"h1\",{className:\"postTitle\",children:movie.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-infoo\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" \",movie.year,\" \"]}),\"||\",/*#__PURE__*/_jsxs(\"span\",{children:[\" \",movie.runtime+\"min.\",\" \"]}),/*#__PURE__*/_jsx(\"div\",{children:movie.genres.join(\", \")})]})]})})},movie._id);})})]})})})});};export default Movies;","map":{"version":3,"names":["React","useEffect","useState","useMoviesContext","Link","MovieForm","Modal","Movies","movies","dispatch","show","setShow","fetchMovies","fetch","response","json","ok","type","payload","handleDelete","_id","method","map","movie","posterUrl","title","year","runtime","genres","join"],"sources":["C:/Coding/Web_Dev/MERN_STACK/imdbMovie/frontend/src/pages/Movies.js"],"sourcesContent":["import React from \"react\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useMoviesContext } from \"../hooks/useMoviesContext\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport MovieForm from \"../components/movieform\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport \"./movies.css\";\r\n\r\n\r\n\r\nconst Movies = () => {\r\n\r\n  const {movies, dispatch} = useMoviesContext()\r\n   const [show, setShow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchMovies = async () => {\r\n      const response = await fetch(\"/api/movies\");\r\n      const json = await response.json();\r\n\r\n      if (response.ok) {\r\n        dispatch({type:\"SET_MOVIES\", payload:json})\r\n      }\r\n    };\r\n\r\n    fetchMovies();\r\n  }, []);\r\n\r\n  const handleDelete = async(_id) =>{\r\n    const response = await fetch('/api/movies/'+_id,{\r\n      method:'DELETE'\r\n    })\r\n    const json = await response.json()\r\n    if(response.ok){\r\n      dispatch({type:\"DELETE_MOVIE\", payload:json})\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div id=\"container\">\r\n    <div className=\"margin-Top\">\r\n      <div id=\"section\">\r\n        <div id=\"content\">\r\n          <button className=\"addMovie\" onClick={() => setShow(true)}>\r\n            Add Movie\r\n          </button>\r\n          <Modal title=\"Add A New Movie\" onClose={() => setShow(false)} show={show}>\r\n            <MovieForm onClose={() => setShow(false)} />\r\n          </Modal>\r\n\r\n          <div className=\"post\">\r\n            {/* post cards */}\r\n            {movies &&\r\n              movies.map((movie) => (\r\n                <div className=\"postCards\" key={movie._id}>\r\n                  <a href=\"article.html\">\r\n                    <Link to={`/api/movies/${movie._id}`} movie={movie}>\r\n                      <img src={movie.posterUrl} />\r\n                      <h1 className=\"postTitle\">{movie.title}</h1>\r\n                      <div className=\"movie-infoo\">\r\n                        <span> {movie.year} </span>||\r\n                        <span> {movie.runtime + \"min.\"} </span>\r\n                        <div>{movie.genres.join(\", \")}</div>\r\n                      </div>\r\n                    </Link>\r\n                  </a>\r\n                </div>\r\n              ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Movies;\r\n"],"mappings":"+ZAAA,MAAOA,MAAP,KAAkB,OAAlB,CAEA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,gBAAT,KAAiC,2BAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,MAAOC,UAAP,KAAsB,yBAAtB,CACA,MAAOC,MAAP,KAAkB,gBAAlB,CACA,MAAO,cAAP,C,wFAIA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CAEnB,sBAA2BJ,gBAAgB,EAA3C,CAAOK,MAAP,mBAAOA,MAAP,CAAeC,QAAf,mBAAeA,QAAf,CACC,cAAwBP,QAAQ,CAAC,KAAD,CAAhC,wCAAOQ,IAAP,eAAaC,OAAb,eAEDV,SAAS,CAAC,UAAM,CACd,GAAMW,YAAW,4FAAG,6KACKC,MAAK,CAAC,aAAD,CADV,QACZC,QADY,qCAECA,SAAQ,CAACC,IAAT,EAFD,QAEZA,IAFY,eAIlB,GAAID,QAAQ,CAACE,EAAb,CAAiB,CACfP,QAAQ,CAAC,CAACQ,IAAI,CAAC,YAAN,CAAoBC,OAAO,CAACH,IAA5B,CAAD,CAAR,CACD,CANiB,sDAAH,kBAAXH,YAAW,0CAAjB,CASAA,WAAW,GACZ,CAXQ,CAWN,EAXM,CAAT,CAaA,GAAMO,aAAY,6FAAG,kBAAMC,GAAN,iKACIP,MAAK,CAAC,eAAeO,GAAhB,CAAoB,CAC9CC,MAAM,CAAC,QADuC,CAApB,CADT,QACbP,QADa,uCAIAA,SAAQ,CAACC,IAAT,EAJA,QAIbA,IAJa,gBAKnB,GAAGD,QAAQ,CAACE,EAAZ,CAAe,CACbP,QAAQ,CAAC,CAACQ,IAAI,CAAC,cAAN,CAAsBC,OAAO,CAACH,IAA9B,CAAD,CAAR,CACD,CAPkB,wDAAH,kBAAZI,aAAY,6CAAlB,CAWA,mBACE,YAAK,EAAE,CAAC,WAAR,uBACA,YAAK,SAAS,CAAC,YAAf,uBACE,YAAK,EAAE,CAAC,SAAR,uBACE,aAAK,EAAE,CAAC,SAAR,wBACE,eAAQ,SAAS,CAAC,UAAlB,CAA6B,OAAO,CAAE,yBAAMR,QAAO,CAAC,IAAD,CAAb,EAAtC,uBADF,cAIE,KAAC,KAAD,EAAO,KAAK,CAAC,iBAAb,CAA+B,OAAO,CAAE,yBAAMA,QAAO,CAAC,KAAD,CAAb,EAAxC,CAA8D,IAAI,CAAED,IAApE,uBACE,KAAC,SAAD,EAAW,OAAO,CAAE,yBAAMC,QAAO,CAAC,KAAD,CAAb,EAApB,EADF,EAJF,cAQE,YAAK,SAAS,CAAC,MAAf,UAEGH,MAAM,EACLA,MAAM,CAACc,GAAP,CAAW,SAACC,KAAD,qBACT,YAAK,SAAS,CAAC,WAAf,uBACE,UAAG,IAAI,CAAC,cAAR,uBACE,MAAC,IAAD,EAAM,EAAE,uBAAiBA,KAAK,CAACH,GAAvB,CAAR,CAAsC,KAAK,CAAEG,KAA7C,wBACE,YAAK,GAAG,CAAEA,KAAK,CAACC,SAAhB,EADF,cAEE,WAAI,SAAS,CAAC,WAAd,UAA2BD,KAAK,CAACE,KAAjC,EAFF,cAGE,aAAK,SAAS,CAAC,aAAf,wBACE,4BAAQF,KAAK,CAACG,IAAd,OADF,mBAEE,4BAAQH,KAAK,CAACI,OAAN,CAAgB,MAAxB,OAFF,cAGE,qBAAMJ,KAAK,CAACK,MAAN,CAAaC,IAAb,CAAkB,IAAlB,CAAN,EAHF,GAHF,GADF,EADF,EAAgCN,KAAK,CAACH,GAAtC,CADS,EAAX,CAHJ,EARF,GADF,EADF,EADA,EADF,CAoCD,CAjED,CAmEA,cAAeb,OAAf"},"metadata":{},"sourceType":"module"}